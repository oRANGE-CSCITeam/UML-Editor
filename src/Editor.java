
import java.awt.Color;
import java.util.ArrayList;
import javax.swing.JDialog;
import javax.swing.JFileChooser;
import javax.swing.JPopupMenu;
import javax.swing.JTextField;
import javax.swing.ListModel;
import models.Attribute;
import models.ClassObject;
import models.Relationship;

/**
 * Editor where the main UML Diagram will be created
 *
 * @author oRange
 */
public class Editor extends javax.swing.JFrame {

    private int addClassX, addClassY, obj;
    private Color classColor;
    private ArrayList<Attribute> addAttributeList;
    private ArrayList<String> addOperationList;

    /**
     * Creates new form Editor
     */
    public Editor() {
        initComponents();
        addAttributeList = new ArrayList();
        addOperationList = new ArrayList();
        classColor = Color.orange;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        addClassDialog = new javax.swing.JDialog();
        classNameLabel = new javax.swing.JLabel();
        classNameTextField = new javax.swing.JTextField();
        createClassButton = new javax.swing.JButton();
        attributesLabel = new javax.swing.JLabel();
        attributesScroll = new javax.swing.JScrollPane();
        attributeList = new javax.swing.JList();
        operationsLabel = new javax.swing.JLabel();
        operationsScroll = new javax.swing.JScrollPane();
        operationsList = new javax.swing.JList();
        addAttributeButton = new javax.swing.JButton();
        removeAttributeButton = new javax.swing.JButton();
        addOperationButton = new javax.swing.JButton();
        removeOperationButton = new javax.swing.JButton();
        colorButton = new javax.swing.JButton();
        emptyClassWarningDialog = new javax.swing.JDialog();
        emptyClassLabel = new javax.swing.JLabel();
        emptyClassButton = new javax.swing.JButton();
        addAttributeDialog = new javax.swing.JDialog();
        attributeNameLabel = new javax.swing.JLabel();
        attributeNameText = new javax.swing.JTextField();
        privateRadio = new javax.swing.JRadioButton();
        publicRadio = new javax.swing.JRadioButton();
        addAtributeButton2 = new javax.swing.JButton();
        attributeTypeLabel = new javax.swing.JLabel();
        colorDialog = new javax.swing.JDialog();
        classColorChooser = new javax.swing.JColorChooser();
        chooseColorButton = new javax.swing.JButton();
        addOperationDialog = new javax.swing.JDialog();
        operationNameLabel = new javax.swing.JLabel();
        operationNameText = new javax.swing.JTextField();
        addOperationButton2 = new javax.swing.JButton();
        editorPopMenu = new javax.swing.JPopupMenu();
        editorPopItem1 = new javax.swing.JMenuItem();
        editorPopItem2 = new javax.swing.JMenuItem();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        editorPane1 = new EditorPane();
        jToolBar1 = new javax.swing.JToolBar();
        jToggleButton3 = new javax.swing.JToggleButton();
        relationTestButton = new javax.swing.JButton();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();

        addClassDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        addClassDialog.setBounds(new java.awt.Rectangle(0, 22, 482, 264));
        addClassDialog.addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                addClassDialogWindowClosing(evt);
            }
        });

        classNameLabel.setText("Class Name");

        createClassButton.setText("Done");
        createClassButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                createClassButtonActionPerformed(evt);
            }
        });

        attributesLabel.setText("Attributes");

        attributesScroll.setViewportView(attributeList);

        operationsLabel.setText("Operations");

        operationsScroll.setViewportView(operationsList);

        addAttributeButton.setText("Add");
        addAttributeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addAttributeButtonActionPerformed(evt);
            }
        });

        removeAttributeButton.setText("Remove");
        removeAttributeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                removeAttributeButtonActionPerformed(evt);
            }
        });

        addOperationButton.setText("Add");
        addOperationButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addOperationButtonActionPerformed(evt);
            }
        });

        removeOperationButton.setText("Remove");
        removeOperationButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                removeOperationButtonActionPerformed(evt);
            }
        });

        colorButton.setText("Color");
        colorButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                colorButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout addClassDialogLayout = new javax.swing.GroupLayout(addClassDialog.getContentPane());
        addClassDialog.getContentPane().setLayout(addClassDialogLayout);
        addClassDialogLayout.setHorizontalGroup(
            addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addClassDialogLayout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(operationsLabel)
                    .addComponent(attributesLabel)
                    .addComponent(classNameLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(addClassDialogLayout.createSequentialGroup()
                        .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(addClassDialogLayout.createSequentialGroup()
                                .addComponent(classNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(colorButton))
                            .addGroup(addClassDialogLayout.createSequentialGroup()
                                .addComponent(attributesScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(removeAttributeButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(addAttributeButton, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE))))
                        .addContainerGap())
                    .addGroup(addClassDialogLayout.createSequentialGroup()
                        .addComponent(operationsScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(addClassDialogLayout.createSequentialGroup()
                                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(removeOperationButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(addOperationButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addContainerGap(18, Short.MAX_VALUE))
                            .addGroup(addClassDialogLayout.createSequentialGroup()
                                .addComponent(createClassButton, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))))
        );

        addClassDialogLayout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {attributesLabel, classNameLabel});

        addClassDialogLayout.setVerticalGroup(
            addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addClassDialogLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(classNameLabel)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(classNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(colorButton)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(attributesLabel)
                    .addComponent(attributesScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 73, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(addClassDialogLayout.createSequentialGroup()
                        .addComponent(addAttributeButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(removeAttributeButton)))
                .addGap(12, 12, 12)
                .addGroup(addClassDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(operationsLabel)
                    .addComponent(operationsScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 72, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(addClassDialogLayout.createSequentialGroup()
                        .addComponent(addOperationButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(removeOperationButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(createClassButton)))
                .addContainerGap(29, Short.MAX_VALUE))
        );

        addClassDialogLayout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {attributesLabel, classNameLabel, classNameTextField});

        emptyClassWarningDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        emptyClassWarningDialog.setSize(new java.awt.Dimension(245, 155));

        emptyClassLabel.setText("Class must have a class name");

        emptyClassButton.setText("OK");
        emptyClassButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                emptyClassButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout emptyClassWarningDialogLayout = new javax.swing.GroupLayout(emptyClassWarningDialog.getContentPane());
        emptyClassWarningDialog.getContentPane().setLayout(emptyClassWarningDialogLayout);
        emptyClassWarningDialogLayout.setHorizontalGroup(
            emptyClassWarningDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(emptyClassWarningDialogLayout.createSequentialGroup()
                .addGroup(emptyClassWarningDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(emptyClassWarningDialogLayout.createSequentialGroup()
                        .addGap(31, 31, 31)
                        .addComponent(emptyClassLabel))
                    .addGroup(emptyClassWarningDialogLayout.createSequentialGroup()
                        .addGap(81, 81, 81)
                        .addComponent(emptyClassButton, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(26, Short.MAX_VALUE))
        );
        emptyClassWarningDialogLayout.setVerticalGroup(
            emptyClassWarningDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(emptyClassWarningDialogLayout.createSequentialGroup()
                .addGap(40, 40, 40)
                .addComponent(emptyClassLabel)
                .addGap(39, 39, 39)
                .addComponent(emptyClassButton)
                .addContainerGap(31, Short.MAX_VALUE))
        );

        addAttributeDialog.setTitle("Add Attribute");
        addAttributeDialog.setBounds(new java.awt.Rectangle(0, 22, 375, 120));

        attributeNameLabel.setText("Attribute Name");

        privateRadio.setText("Private");

        publicRadio.setText("Public");

        addAtributeButton2.setText("Add");
        addAtributeButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addAtributeButton2ActionPerformed(evt);
            }
        });

        attributeTypeLabel.setText("Attribute Type");

        javax.swing.GroupLayout addAttributeDialogLayout = new javax.swing.GroupLayout(addAttributeDialog.getContentPane());
        addAttributeDialog.getContentPane().setLayout(addAttributeDialogLayout);
        addAttributeDialogLayout.setHorizontalGroup(
            addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addAttributeDialogLayout.createSequentialGroup()
                .addGroup(addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(addAttributeDialogLayout.createSequentialGroup()
                        .addGap(17, 17, 17)
                        .addGroup(addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(attributeNameText, javax.swing.GroupLayout.PREFERRED_SIZE, 196, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(attributeNameLabel))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addAttributeDialogLayout.createSequentialGroup()
                                .addComponent(privateRadio)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(publicRadio))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addAttributeDialogLayout.createSequentialGroup()
                                .addComponent(attributeTypeLabel)
                                .addGap(37, 37, 37))))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addAttributeDialogLayout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(addAtributeButton2)))
                .addContainerGap())
        );
        addAttributeDialogLayout.setVerticalGroup(
            addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addAttributeDialogLayout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addGroup(addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(attributeNameLabel)
                    .addComponent(attributeTypeLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(addAttributeDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(attributeNameText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(privateRadio)
                    .addComponent(publicRadio))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(addAtributeButton2)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        chooseColorButton.setText("Ok");
        chooseColorButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chooseColorButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout colorDialogLayout = new javax.swing.GroupLayout(colorDialog.getContentPane());
        colorDialog.getContentPane().setLayout(colorDialogLayout);
        colorDialogLayout.setHorizontalGroup(
            colorDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(colorDialogLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(colorDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, colorDialogLayout.createSequentialGroup()
                        .addComponent(classColorChooser, javax.swing.GroupLayout.PREFERRED_SIZE, 694, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap())
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, colorDialogLayout.createSequentialGroup()
                        .addComponent(chooseColorButton)
                        .addGap(40, 40, 40))))
        );
        colorDialogLayout.setVerticalGroup(
            colorDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(colorDialogLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(classColorChooser, javax.swing.GroupLayout.PREFERRED_SIZE, 376, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 10, Short.MAX_VALUE)
                .addComponent(chooseColorButton)
                .addContainerGap())
        );

        operationNameLabel.setText("Operation Name");

        addOperationButton2.setText("Add");
        addOperationButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addOperationButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout addOperationDialogLayout = new javax.swing.GroupLayout(addOperationDialog.getContentPane());
        addOperationDialog.getContentPane().setLayout(addOperationDialogLayout);
        addOperationDialogLayout.setHorizontalGroup(
            addOperationDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addOperationDialogLayout.createSequentialGroup()
                .addGroup(addOperationDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, addOperationDialogLayout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addGroup(addOperationDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(addOperationDialogLayout.createSequentialGroup()
                                .addComponent(operationNameLabel)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 124, Short.MAX_VALUE))
                            .addComponent(operationNameText)))
                    .addGroup(addOperationDialogLayout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(addOperationButton2)))
                .addGap(18, 18, 18))
        );
        addOperationDialogLayout.setVerticalGroup(
            addOperationDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addOperationDialogLayout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addComponent(operationNameLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(operationNameText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(addOperationButton2)
                .addContainerGap())
        );

        editorPopItem1.setText("Edit");
        editorPopMenu.add(editorPopItem1);

        editorPopItem2.setText("Delete");
        editorPopItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editorPopItem2ActionPerformed(evt);
            }
        });
        editorPopMenu.add(editorPopItem2);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBounds(new java.awt.Rectangle(300, 200, 913, 536));

        jTabbedPane1.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        editorPane1.setBackground(new java.awt.Color(255, 255, 255));
        editorPane1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                editorPane1MousePressed(evt);
            }
        });

        javax.swing.GroupLayout editorPane1Layout = new javax.swing.GroupLayout(editorPane1);
        editorPane1.setLayout(editorPane1Layout);
        editorPane1Layout.setHorizontalGroup(
            editorPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 664, Short.MAX_VALUE)
        );
        editorPane1Layout.setVerticalGroup(
            editorPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 413, Short.MAX_VALUE)
        );

        jTabbedPane1.addTab("Editor", editorPane1);

        jToolBar1.setFloatable(false);
        jToolBar1.setOrientation(javax.swing.SwingConstants.VERTICAL);
        jToolBar1.setRollover(true);

        jToggleButton3.setText("Add a Class");
        jToggleButton3.setToolTipText("Add a Class");
        jToggleButton3.setFocusable(false);
        jToggleButton3.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jToggleButton3.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToggleButton3.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jToggleButton3MouseClicked(evt);
            }
        });
        jToolBar1.add(jToggleButton3);

        relationTestButton.setText("Relation");
        relationTestButton.setFocusable(false);
        relationTestButton.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        relationTestButton.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        relationTestButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                relationTestButtonActionPerformed(evt);
            }
        });
        jToolBar1.add(relationTestButton);

        jMenu1.setText("File");
        jMenu1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenu1ActionPerformed(evt);
            }
        });

        jMenuItem1.setText("Save");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem1);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jToolBar1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTabbedPane1))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jToolBar1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jTabbedPane1)
        );

        jTabbedPane1.getAccessibleContext().setAccessibleName("Editor");

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jMenu1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenu1ActionPerformed
        // TODO add your handling code here:
        editorPane1.toggleCanAddClassObject();
    }//GEN-LAST:event_jMenu1ActionPerformed

    public JDialog getAddClassDialog() {
        return addClassDialog;
    }

    public void setjDialog1Visible() {
        addClassDialog.setVisible(true);
    }

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        // TODO add your handling code here:
        JTextField filename = new JTextField();
        JTextField dir = new JTextField();
        JFileChooser c = new JFileChooser();
        // Demonstrate "Save" dialog:
        int rVal = c.showSaveDialog(this);
        if (rVal == JFileChooser.APPROVE_OPTION) {
            filename.setText(c.getSelectedFile().getName());
            dir.setText(c.getCurrentDirectory().toString());
        }
        if (rVal == JFileChooser.CANCEL_OPTION) {
            filename.setText("You pressed cancel");
            dir.setText("");
        }
    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void jToggleButton3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jToggleButton3MouseClicked
        // TODO add your handling code here:
        editorPane1.toggleCanAddClassObject();
    }//GEN-LAST:event_jToggleButton3MouseClicked

    private void addAtributeButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addAtributeButton2ActionPerformed
        String attribute = attributeNameText.getText();
        String[] tempAttributeList;
        boolean type = true;
        if (privateRadio.isSelected()) {
            type = true;
        }
        if (publicRadio.isSelected()) {
            type = false;
        }

        addAttributeList.add(new Attribute(attribute, type));
        tempAttributeList = new String[addAttributeList.size()];

        for (int i = 0; i < addAttributeList.size(); i++) {
            tempAttributeList[i] = addAttributeList.get(i).getAttributeName();
        }
        attributeList.setListData(tempAttributeList);
        publicRadio.setSelected(false);
        privateRadio.setSelected(false);
        attributeNameText.setText("");
        addAttributeDialog.dispose();
    }//GEN-LAST:event_addAtributeButton2ActionPerformed

    private void colorButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_colorButtonActionPerformed
        colorDialog.setBounds(this.getX() + 200, this.getY() + 200, 700, 450);
        colorDialog.setVisible(true);
    }//GEN-LAST:event_colorButtonActionPerformed

    private void chooseColorButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chooseColorButtonActionPerformed
        classColor = classColorChooser.getColor();
        colorDialog.dispose();
    }//GEN-LAST:event_chooseColorButtonActionPerformed

    private void removeAttributeButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_removeAttributeButtonActionPerformed
        String[] tempAttributeList;
        if (attributeList.getSelectedIndices().length > 0 && addAttributeList.size() > 0) {
            for (int i = 0; i < attributeList.getSelectedIndices().length; i++) {
                addAttributeList.remove(attributeList.getSelectedIndices()[0]);
            }
            tempAttributeList = new String[addAttributeList.size()];
            for (int i = 0; i < addAttributeList.size(); i++) {
                tempAttributeList[i] = addAttributeList.get(i).getAttributeName();
            }
            attributeList.setListData(tempAttributeList);
        }
    }//GEN-LAST:event_removeAttributeButtonActionPerformed

    private void removeOperationButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_removeOperationButtonActionPerformed
        if (operationsList.getSelectedIndices().length > 0 && addOperationList.size() > 0) {
            for (int i = 0; i < operationsList.getSelectedIndices().length; i++) {
                addOperationList.remove(operationsList.getSelectedIndices()[0]);
            }
            operationsList.setListData(addOperationList.toArray());
        }
    }//GEN-LAST:event_removeOperationButtonActionPerformed

    private void emptyClassButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_emptyClassButtonActionPerformed
        // TODO add your handling code here:
        emptyClassWarningDialog.setVisible(false);
    }//GEN-LAST:event_emptyClassButtonActionPerformed

    private void addAttributeButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addAttributeButtonActionPerformed
        addAttributeDialog.setBounds(addClassDialog.getX() + 50, addClassDialog.getY() + 100, 380, 120);
        addAttributeDialog.setVisible(true);
    }//GEN-LAST:event_addAttributeButtonActionPerformed

    private void createClassButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_createClassButtonActionPerformed
        String className = classNameTextField.getText();

        if (className.equals("")) {
            emptyClassWarningDialog.setBounds(addClassDialog.getX() + 150, addClassDialog.getY() + 100, 245, 155);
            emptyClassWarningDialog.setVisible(true);
        } else {
            editorPane1.getClassObjectList().add(new ClassObject(className, addClassX - 30, addClassY - 20));
            editorPane1.getClassObjectList().get(obj).setColor(classColor);
            for (int i = 0; i < addAttributeList.size(); i++) {
                editorPane1.getClassObjectList().get(obj).addAttribute(addAttributeList.get(i).getAttributeName(), addAttributeList.get(i).isType());
            }
            for (int i = 0; i < addOperationList.size(); i++) {
                editorPane1.getClassObjectList().get(obj).addOperation(addOperationList.get(i));
            }
            
            obj++;
            editorPane1.repaint();
            addClassDialog.dispose();
            classNameTextField.setText("");
            jToggleButton3.doClick();
            editorPane1.toggleCanAddClassObject();
            addAttributeList.clear();
            addOperationList.clear();
            attributeList.setListData(new String[0]);
            operationsList.setListData(new String[0]);
            this.setEnabled(true);
        }
    }//GEN-LAST:event_createClassButtonActionPerformed

    private void addClassDialogWindowClosing(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_addClassDialogWindowClosing
        jToggleButton3.doClick();
        editorPane1.toggleCanAddClassObject();
        this.setEnabled(true);
    }//GEN-LAST:event_addClassDialogWindowClosing

    private void addOperationButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addOperationButtonActionPerformed
        addOperationDialog.setBounds(addClassDialog.getX() + 50, addClassDialog.getY() + 100, 300, 120);
        addOperationDialog.setVisible(true);
    }//GEN-LAST:event_addOperationButtonActionPerformed

    private void addOperationButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addOperationButton2ActionPerformed
        String operation = operationNameText.getText();
        addOperationList.add(operation);
        operationsList.setListData(addOperationList.toArray());
        operationNameText.setText("");
        addOperationDialog.dispose();
    }//GEN-LAST:event_addOperationButton2ActionPerformed

    private void editorPane1MousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editorPane1MousePressed
        if (editorPane1.isCanAddClassObject()) {
            addClassX = evt.getX();
            addClassY = evt.getY();
            //This is set the addClass Dialog at the center of the Frame and to visible
            addClassDialog.setLocation(this.getX() + 200, this.getY() + 100);
            addClassDialog.setVisible(true);
            this.setEnabled(false);
        }
        if(evt.isPopupTrigger() && editorPane1.isShowPopUp()) {
            editorPopMenu.show(evt.getComponent(), evt.getX(), evt.getY());
            editorPane1.togglePopUp();
        }
    }//GEN-LAST:event_editorPane1MousePressed

    private void editorPopItem2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editorPopItem2ActionPerformed
        
        if(editorPane1.getIsDraggingWho() >= 0) {
            editorPane1.classObjectList.remove(editorPane1.getIsDraggingWho());
            editorPane1.setIsDraggingWho(-1);
            obj--;
            repaint();
        }
    }//GEN-LAST:event_editorPopItem2ActionPerformed

    private void relationTestButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_relationTestButtonActionPerformed
        Relationship relation;
        relation = new Relationship(editorPane1.classObjectList.get(0), editorPane1.classObjectList.get(1), 1);
        editorPane1.getRelationList().add(relation);
        editorPane1.repaint();
    }//GEN-LAST:event_relationTestButtonActionPerformed

    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Editor.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Editor.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Editor.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Editor.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        try {
            Thread.currentThread().sleep(2000);
        } catch (InterruptedException ex) {
        }
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Editor().setVisible(true);
            }
        });

    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton addAtributeButton2;
    private javax.swing.JButton addAttributeButton;
    private javax.swing.JDialog addAttributeDialog;
    private javax.swing.JDialog addClassDialog;
    private javax.swing.JButton addOperationButton;
    private javax.swing.JButton addOperationButton2;
    private javax.swing.JDialog addOperationDialog;
    private javax.swing.JList attributeList;
    private javax.swing.JLabel attributeNameLabel;
    private javax.swing.JTextField attributeNameText;
    private javax.swing.JLabel attributeTypeLabel;
    private javax.swing.JLabel attributesLabel;
    private javax.swing.JScrollPane attributesScroll;
    private javax.swing.JButton chooseColorButton;
    private javax.swing.JColorChooser classColorChooser;
    private javax.swing.JLabel classNameLabel;
    private javax.swing.JTextField classNameTextField;
    private javax.swing.JButton colorButton;
    private javax.swing.JDialog colorDialog;
    private javax.swing.JButton createClassButton;
    private EditorPane editorPane1;
    private javax.swing.JMenuItem editorPopItem1;
    private javax.swing.JMenuItem editorPopItem2;
    private javax.swing.JPopupMenu editorPopMenu;
    private javax.swing.JButton emptyClassButton;
    private javax.swing.JLabel emptyClassLabel;
    private javax.swing.JDialog emptyClassWarningDialog;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JToggleButton jToggleButton3;
    private javax.swing.JToolBar jToolBar1;
    private javax.swing.JLabel operationNameLabel;
    private javax.swing.JTextField operationNameText;
    private javax.swing.JLabel operationsLabel;
    private javax.swing.JList operationsList;
    private javax.swing.JScrollPane operationsScroll;
    private javax.swing.JRadioButton privateRadio;
    private javax.swing.JRadioButton publicRadio;
    private javax.swing.JButton relationTestButton;
    private javax.swing.JButton removeAttributeButton;
    private javax.swing.JButton removeOperationButton;
    // End of variables declaration//GEN-END:variables
}
